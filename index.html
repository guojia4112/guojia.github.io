
<!DOCTYPE html>
<html>
<head>
    <title>T-EKMA</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <h2>T-EKMA diagram</h2>
    <p>请输入一个数据点（Y值），将显示在背景曲线上：</p>
    <input type="number" id="userInput" placeholder="输入你的数据点">
    <button onclick="plotUserPoint()">显示数据点</button>

    <div id="plot" style="width:800px;height:500px;"></div>

    <script>
        // 背景曲线数据（示例：y = x^2）
        let xValues = [];
        let yValues = [];
        for (let x = -10; x <= 10; x += 0.5) {
            xValues.push(x);
            yValues.push(x * x);
        }

        // 初始图表
        let backgroundTrace = {
            x: xValues,
            y: yValues,
            mode: 'lines',
            name: '背景曲线 y = x²',
            line: {color: 'blue'}
        };

        let userTrace = {
            x: [],
            y: [],
            mode: 'markers',
            name: '你的数据点',
            marker: {color: 'red', size: 10}
        };

        let layout = {
            title: '背景曲线与用户数据点比较',
            xaxis: {title: 'X'},
            yaxis: {title: 'Y'}
        };

        Plotly.newPlot('plot', [backgroundTrace, userTrace], layout);

        // 用户输入数据点并更新图表
        function plotUserPoint() {
            let y = parseFloat(document.getElementById('userInput').value);
            if (!isNaN(y)) {
                let closestX = xValues.reduce((prev, curr) => Math.abs(curr - Math.sqrt(y)) < Math.abs(prev - Math.sqrt(y)) ? curr : prev);
                userTrace.x = [closestX];
                userTrace.y = [y];
                Plotly.react('plot', [backgroundTrace, userTrace], layout);
            }
        }
    </script>
</body>
</html>
